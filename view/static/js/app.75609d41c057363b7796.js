webpackJsonp([1],{"/GjI":function(t,e){},"0mDL":function(t,e){},"2iZu":function(t,e){},"39WP":function(t,e){},B5d6:function(t,e){},NHnr:function(t,e,n){"use strict";function o(t){n("2iZu")}function a(t){n("0mDL")}function r(t){n("B5d6")}function s(){return new B.a(function(t,e){P.a.get(NaN).then(function(e){e=e.data,t(e)}).catch(function(t){e(t)})})}function i(t){n("/GjI")}function l(t){n("zdTu")}function u(t){n("dkRS")}function c(t){n("39WP")}function d(t){n("rIT2")}function p(t,e){var n={username:t,password:e};return new B.a(function(t,e){P.a.post(NaN,n).then(function(e){e=e.data,t(e)}).catch(function(t){e(error)})})}Object.defineProperty(e,"__esModule",{value:!0});var m=n("7+uW"),f={},h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},v=[],g={render:h,staticRenderFns:v},_=g,b=n("VU/8"),w=o,C=b(f,_,!1,w,null,null),E=C.exports,S=n("/ocq"),y={name:"hello",data:function(){return{msg:"此功能开发者，敬请期待"}}},x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))])])},k=[],T={render:x,staticRenderFns:k},$=T,R=n("VU/8"),N=a,F=R(y,$,!1,N,"data-v-6c68d398",null),L=F.exports,I={data:function(){return{loginForm:{email:"",password:""},loginRules:{email:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur",validator:function(t,e,n){e.length<6?n(new Error("密码不能小于6位")):n()}}]},loading:!1,showDialog:!1}},methods:{isEmail:function(t){return/^[a-z0-9](?:[-_.+]?[a-z0-9]+)*@fusio\.com\.cn$/i.test(t.trim())},handleLogin:function(){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return console.error("error submit!!"),!1;t.loading=!0,t.$store.dispatch("LoginByEmail",t.loginForm).then(function(){t.loading=!1,t.$router.push({path:"/"})}).catch(function(e){t.loading=!1,t.$message.error(e)})})}}},O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-container"},[n("el-form",{ref:"loginForm",staticClass:"card-box login-form",attrs:{autoComplete:"on",model:t.loginForm,rules:t.loginRules,"label-position":"left","label-width":"0px"}},[n("h3",{staticClass:"title"},[t._v("系统登录")]),t._v(" "),n("el-form-item",{attrs:{prop:"email"}},[n("span",{staticClass:"svg-container"},[n("i",{staticClass:"el-icon-menu"})]),t._v(" "),n("el-input",{attrs:{name:"email",type:"text",autoComplete:"on",placeholder:"请输入账号"},model:{value:t.loginForm.email,callback:function(e){t.$set(t.loginForm,"email",e)},expression:"loginForm.email"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container"},[n("i",{staticClass:"el-icon-setting"})]),t._v(" "),n("el-input",{attrs:{name:"password",type:"password",autoComplete:"on",placeholder:"密码"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleLogin(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){e.preventDefault(),t.handleLogin(e)}}},[t._v("\n          登录\n      ")])],1),t._v(" "),n("div",{staticClass:"tips"},[t._v("输入账号密码展示爬虫情况...")]),t._v(" "),n("div",{staticClass:"tips"},[t._v("本网站暂不提供注册,需要账号密码请联系管理员(你应该知道是谁)...")])],1)],1)},D=[],U={render:O,staticRenderFns:D},A=U,j=n("VU/8"),M=r,H=j(I,A,!1,M,null,null),z=H.exports,V=n("//Fk"),B=n.n(V),q=n("mtWM"),P=n.n(q),W=n("zL8q"),K=n.n(W),G={mounted:function(){console.log(this.spiders);var t=this;s().then(function(e){if(e){e=JSON.parse(e.data),console.log(e);var n=[];e.forEach(function(t){var e=[];t.servers.forEach(function(t){t.tables.forEach(function(n){var o={};o.hostIp=t.hostIp,o.hostName=t.hostName,o.state=o.state,o.countRecord=n.countRecord,o.fourHoursCount=n.fourHoursCount,o.countRecord=n.countRecord,o.fourHoursCount=n.fourHoursCount,o.oneDayCount=n.oneDayCount,o.table=n.table,o.twoDayCount=n.twoDayCount,o.tableLength=t.tables.length,e.push(o)})}),n.push({spiderName:t.spiderName,servers:e})}),console.log(n),t.spiders=n}})},name:"manager",methods:{handleChange:function(t){console.log(t)},objectSpanMethod:function(t){var e=t.row,n=(t.column,t.rowIndex),o=t.columnIndex;if(0===o||1===o||2===o)return n%e.tableLength==0?{rowspan:e.tableLength,colspan:1}:{rowspan:0,colspan:0}}},filters:{capitalize:function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""}},data:function(){return{spiders:[]}}},J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange}},t._l(t.spiders,function(e){return n("el-collapse-item",{key:e.spiderName,attrs:{title:t._f("capitalize")(e.spiderName),name:e.spiderName}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.servers,border:"","span-method":t.objectSpanMethod,"show-summary":""}},[n("el-table-column",{attrs:{fixed:"left",label:"状态",width:"60","class-name":"colum-center"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("i",{class:e.servers[t.$index].state?"el-icon-success":"el-icon-warning"})]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"hostIp",label:"服务器ip",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"hostName",label:"服务器名字"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"table",label:"表"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"fourHoursCount",label:"4小时内爬取条数"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"oneDayCount",label:"1天内爬取条数"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"twoDayCount",label:"2天内爬取条数"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"countRecord",label:"爬取总条数"}})],1)],1)}))],1)},Y=[],Z={render:J,staticRenderFns:Y},Q=Z,X=n("VU/8"),tt=i,et=X(G,Q,!1,tt,null,null),nt=et.exports,ot={methods:{logout:function(){var t=this;this.$store.dispatch("LogOut").then(function(){t.$router.push({path:"/login"})}).catch(function(e){t.$message.error(e)})}}},at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar"},[n("div",{staticClass:"info-container"},[n("a",{attrs:{href:"javascript:;"},on:{click:t.logout}},[n("i",{staticClass:"el-icon-upload2"}),t._v(" 退出")])])])},rt=[],st={render:at,staticRenderFns:rt},it=st,lt=n("VU/8"),ut=l,ct=lt(ot,it,!1,ut,"data-v-67e27687",null),dt=ct.exports,pt={name:"Sidebar",computed:{onRoutes:function(){return this.$route.path}},methods:{}},mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[n("el-col",{attrs:{span:24}},[n("el-menu",{staticClass:"menu",attrs:{router:"","background-color":"#2F323A","text-color":"#fff","active-text-color":"#ffd04b"}},[n("el-submenu",{attrs:{index:"1"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-setting"}),t._v(" "),n("span",[t._v("爬虫管理")])]),t._v(" "),n("el-menu-item-group",[n("el-menu-item",{staticClass:"item",attrs:{index:"manager"}},[t._v("服务器总览")]),t._v(" "),n("el-menu-item",{staticClass:"item",attrs:{index:"hello"}},[t._v("自定义查询")])],1)],2),t._v(" "),n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-sort"}),t._v(" "),n("span",[t._v("数据分析")])]),t._v(" "),n("el-menu-item-group",[n("el-menu-item",{staticClass:"item",attrs:{index:"hello"}},[t._v("数据分析1")])],1)],2)],1)],1)],1)},ft=[],ht={render:mt,staticRenderFns:ft},vt=ht,gt=n("VU/8"),_t=u,bt=gt(pt,vt,!1,_t,null,null),wt=bt.exports,Ct={name:"AppMain",computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date}},methods:{scrollBottom:function(){var t=this.$refs.wrap.getElementsByClassName("container-footer")[0];t&&(t.style.bottom=-this.$refs.wrap.scrollTop+"px")}}},Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{ref:"wrap",staticClass:"app-main"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{key:t.key})],1)],1)},St=[],yt={render:Et,staticRenderFns:St},xt=yt,kt=n("VU/8"),Tt=c,$t=kt(Ct,xt,!1,Tt,"data-v-6a6c74fd",null),Rt=$t.exports,Nt={name:"layout",components:{Navbar:dt,Sidebar:wt,AppMain:Rt}},Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-wrapper"},[n("div",{staticClass:"navigator-wrapper"},[n("div",{staticClass:"navigator-container"},[n("div",{staticClass:"logo"}),t._v(" "),n("Sidebar")],1)]),t._v(" "),n("div",{staticClass:"main-container"},[n("Navbar"),t._v(" "),n("App-main")],1)])},Lt=[],It={render:Ft,staticRenderFns:Lt},Ot=It,Dt=n("VU/8"),Ut=d,At=Dt(Nt,Ot,!1,Ut,"data-v-62375bf0",null),jt=At.exports;m.default.use(S.a);var Mt=new S.a({mode:"history",routes:[{path:"/login",name:"Login",component:z},{path:"/",component:jt,redirect:"/manager",children:[{path:"/manager",component:nt,name:"manager"},{path:"/hello",component:L,name:"Hello"}]}]}),Ht=(n("tvR6"),n("NYxO")),zt={state:{email:"",uid:sessionStorage.getItem("uid"),auth_type:"",status:"",token:sessionStorage.getItem("token"),roles:[]},mutations:{SET_EMAIL:function(t,e){t.email=e},SET_UID:function(t,e){t.uid=e},SET_AUTH_TYPE:function(t,e){t.auth_type=e},SET_STATUS:function(t,e){t.status=e},SET_TOKEN:function(t,e){t.token=e},SET_ROLES:function(t,e){t.roles=e}},actions:{LoginByEmail:function(t,e){var n=t.commit,o=e.email.trim();return new B.a(function(t,a){p(o,e.password).then(function(e){if(console.log(e),!0===e.success){var r=e.data;sessionStorage.token=r.token,sessionStorage.uid=r.uid,n("SET_TOKEN",r.token),n("SET_EMAIL",o),n("SET_ROLES",["admin"]),n("SET_UID",r.uid),t()}else a(e.msg)}).catch(function(t){a(t)})})},LogOut:function(t){var e=t.commit;return new B.a(function(t,n){setTimeout(function(){e("SET_TOKEN",""),e("SET_ROLES",[]),e("SET_EMAIL",""),e("SET_UID",""),sessionStorage.removeItem("token"),sessionStorage.removeItem("uid"),t()},100)})}}},Vt=zt,Bt={token:function(t){return t.user.token},uid:function(t){return t.user.uid},email:function(t){return t.user.email},auth_type:function(t){return t.user.auth_type},status:function(t){return t.user.status},roles:function(t){return t.user.roles}},qt=Bt;m.default.use(Ht.a);var Pt=new Ht.a.Store({modules:{user:Vt},getters:qt}),Wt=Pt;P.a.defaults.headers.post["Content-Type"]="application/json",P.a.defaults.timeout=5e3,P.a.interceptors.request.use(function(t){return Wt.getters.token&&(t.headers.Authorization=""+Wt.getters.token),t},function(t){return B.a.reject(t)}),P.a.interceptors.response.use(function(t){return t},function(t){if(console.log(Wt),t.response)switch(t.response.status){case 401:Object(W.Message)({message:t.response.data,type:"error",duration:5e3}),Wt.dispatch("LogOut").then(function(){Mt.push({path:"/login"})}).catch(function(t){Object(W.Message)({message:t,type:"error",duration:5e3})});default:Object(W.Message)({message:t.response.data,type:"error",duration:5e3})}return B.a.reject(t)}),m.default.config.productionTip=!1,m.default.use(K.a);var Kt=["/login"];Mt.beforeEach(function(t,e,n){document.title=(t.name||"")+"- spild",Wt.getters.token?"/login"===t.path?n({path:"/"}):n():-1!==Kt.indexOf(t.path)?n():n("/login")}),new m.default({el:"#app",router:Mt,store:Wt,template:"<App/>",components:{App:E}})},dkRS:function(t,e){},rIT2:function(t,e){},tvR6:function(t,e){},zdTu:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.75609d41c057363b7796.js.map